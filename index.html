<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don't Break the Enter Key for IME Users</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .marker {
            background: linear-gradient(180deg,rgba(255,255,255,0) 60%, #ffe45e 60%);
            padding: 0 2px;
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto max-w-4xl px-4 py-12">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-2">Stop Breaking the Enter Key.</h1>
            <p class="text-lg text-gray-600">A simple fix to improve UX for millions of Japanese, Chinese, and Korean users.</p>
        </header>

        <main>
            <!-- The Problem Section -->
            <section class="mb-16">
                <div class="bg-white p-8 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-6 text-center">The Problem</h2>
                    <div class="max-w-2xl mx-auto text-center">
                        <p class="mb-4 text-lg">In languages like Japanese, users rely on an <strong class="text-indigo-600">Input Method Editor (IME)</strong>. They type phonetically, then press <strong class="text-red-600">Enter</strong> to <span class="marker">confirm the character conversion.</span></p>
                        <p class="mb-4 text-lg">However, many sites use the Enter key to submit forms. This creates a conflict: when users press Enter to confirm a word, <strong class="text-red-600">the form submits prematurely.</strong></p>
                        <p class="text-lg">This is incredibly frustrating. The best way to understand is to experience it yourself below.</p>
                    </div>
                </div>
            </section>

            <!-- Live Demo Section -->
            <section class="mb-16">
                <h2 class="text-3xl font-bold mb-6 text-center">Try It Yourself</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Bad Example -->
                    <div class="bg-red-50 p-6 rounded-lg border border-red-200">
                        <h3 class="text-xl font-bold mb-3 text-red-800">❌ Bad Implementation</h3>
                        <p class="text-sm text-red-700 mb-4">Try typing a Japanese word (e.g., "にほんご") and press Enter to convert. The form will submit immediately.</p>
                        <div class="relative">
                             <input type="text" id="bad-input" class="w-full p-3 border border-red-300 rounded-md focus:ring-2 focus:ring-red-400 focus:outline-none" placeholder="Type here...">
                             <p id="bad-message" class="text-sm text-red-600 mt-2 h-5"></p>
                        </div>
                    </div>

                    <!-- Good Example -->
                    <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                        <h3 class="text-xl font-bold mb-3 text-green-800">✅ Good Implementation</h3>
                        <p class="text-sm text-green-700 mb-4">Here, pressing Enter only confirms the text. You have to press Enter <span class="font-bold">again</span> to submit. This is the correct behavior.</p>
                         <div class="relative">
                             <input type="text" id="good-input" class="w-full p-3 border border-green-300 rounded-md focus:ring-2 focus:ring-green-400 focus:outline-none" placeholder="Type here...">
                              <p id="good-message" class="text-sm text-green-600 mt-2 h-5"></p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- The Solution Section -->
            <section>
                <h2 class="text-3xl font-bold mb-6 text-center">The Easy Solution: `isComposing`</h2>
                 <div class="bg-white p-8 rounded-lg shadow-md">
                    <p class="mb-6 text-center text-gray-600">The fix is surprisingly simple. Use the `event.isComposing` property in your JavaScript event listener to check if the user is in the middle of an IME composition.</p>
                    <div class="code-block">
<pre><code>
const input = document.getElementById('my-input');

input.addEventListener('keydown', (e) => {
  <span class="text-gray-400">// If user is composing a word, do nothing.</span>
  <span class="text-yellow-400">if (e.isComposing || e.keyCode === 229) {</span>
    <span class="text-yellow-400">return;</span>
  <span class="text-yellow-400">}</span>

  <span class="text-gray-400">// If user presses Enter (and is not composing), submit form.</span>
  <span class="text-cyan-400">if (e.key === 'Enter') {</span>
    <span class="text-gray-400">// submitForm();</span>
    console.log("Form submitted!");
  <span class="text-cyan-400">}</span>
});
</code></pre>
                    </div>
                     <p class="mt-6 text-center text-sm text-gray-500">By adding this simple check, you respect the user's input process and create a much better experience for a global audience.</p>
                </div>
            </section>
        </main>

        <footer class="text-center mt-16 text-gray-500">
            <p>Make your website accessible for everyone. It's easy.</p>
        </footer>
    </div>

    <script>
        const badInput = document.getElementById('bad-input');
        const badMessage = document.getElementById('bad-message');
        const goodInput = document.getElementById('good-input');
        const goodMessage = document.getElementById('good-message');

        // Bad implementation: Submits on any Enter keydown event.
        badInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                badMessage.textContent = 'Submitting... (Incorrectly!)';
                setTimeout(() => {
                    badMessage.textContent = '';
                    badInput.value = '';
                }, 1500);
            }
        });

        // Good implementation: Checks for IME composition.
        goodInput.addEventListener('keydown', (event) => {
            // The magic check: if isComposing is true, the user is still typing.
            // Don't do anything. keyCode 229 is a fallback for some browsers.
            if (event.isComposing || event.keyCode === 229) {
                return;
            }

            // Now, we can safely listen for the Enter key.
            if (event.key === 'Enter') {
                // Prevent default form submission if it's inside a <form>
                event.preventDefault();

                goodMessage.textContent = 'Submitting... (Correctly!)';
                setTimeout(() => {
                    goodMessage.textContent = '';
                    goodInput.value = '';
                }, 1500);
            }
        });

    </script>
</body>
</html>
